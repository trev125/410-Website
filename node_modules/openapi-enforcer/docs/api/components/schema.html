
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>OpenAPI Enforcer | Schema</title>
  <meta name="description" content="A library that makes it easy to validate and use your OpenAPI documents.">

  <link rel="icon" href="/openapi-enforcer/favicon.png">

  <link rel="stylesheet" href="/openapi-enforcer/template-files/styles/main.css" media="all">
  
  
  <link rel="stylesheet" href="/openapi-enforcer/css/main.css" media="all">
  
  
  
</head>

<body>
  <header class="site-header">
    <div class="wrapper">
      <a class="site-title" href="/openapi-enforcer">
        OpenAPI Enforcer
      </a>

      
      <nav class="site-nav">
        <a href="#" class="menu-icon" aria-label="Menu">
          <svg viewBox="0 0 18 15">
            <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
            <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
            <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
          </svg>
        </a>
      </nav>
      
    </div>
  </header>

<div class="page-content">
  <div class="wrapper">

    
    <div class="nav-screen"></div>
    <nav class="nav-list"><ul><li><a href="/openapi-enforcer">OpenAPI Enforcer</a></li><li><a href="/openapi-enforcer/guide">Guide</a><ul><li><a href="/openapi-enforcer/guide/component-plugins">Component Plugins</a></li><li><a href="/openapi-enforcer/guide/create-api">Create an API</a></li><li><a href="/openapi-enforcer/guide/enforcer-exception">EnforcerException</a></li><li><a href="/openapi-enforcer/guide/enforcer-result">EnforcerResult</a></li><li><a href="/openapi-enforcer/guide/exceptions">Exceptions and Warnings</a></li><li><a href="/openapi-enforcer/guide/validate-document">Validate a Document</a></li></ul></li><li><a href="/openapi-enforcer/api">API</a><ul><li><a href="/openapi-enforcer/api/openapi-enforcer">OpenAPI Enforcer</a></li><li><a href="/openapi-enforcer/api/components">Components</a><ul><li><a href="/openapi-enforcer/api/components/openapi">OpenAPI</a></li><li><a href="/openapi-enforcer/api/components/operation">Operation</a></li><li><a href="/openapi-enforcer/api/components/schema" class="current-page">Schema</a></li><li><a href="/openapi-enforcer/api/components/schema-value">Schema Value</a><ul></ul></li><li><a href="/openapi-enforcer/api/components/swagger">Swagger</a></li></ul></li><li><a href="/openapi-enforcer/api/enforcer-exception">EnforcerException</a></li><li><a href="/openapi-enforcer/api/enforcer-result">EnforcerResult</a></li></ul></li><li><a href="/openapi-enforcer/contributing">Contributing</a><ul><li><a href="/openapi-enforcer/contributing/enforcer-components">Enforcer Components</a><ul></ul></li></ul></li></ul></li></nav>
    

    <div class="page-content-main">
      <article class="post">
        <header class="post-header">
          <div class="post-subtitle">API Reference</div>
          <h1 class="post-title">Schema</h1>
        </header>

        
        <div>
          <p><strong>Page Content</strong></p>
          <div class="section-nav"><ul class="toc"><li><a href="#instance-methods">Instance Methods</a><ul><li><a href="#deserialize">deserialize</a></li><li><a href="#discriminate">discriminate</a></li><li><a href="#formalize">formalize</a></li><li><a href="#populate">populate</a></li><li><a href="#random">random</a></li><li><a href="#serialize">serialize</a></li><li><a href="#validate">validate</a></li><li><a href="#toobject">toObject</a></li></ul></li><li><a href="#static-methods">Static Methods</a><ul><li><a href="#definedatatypeformat">defineDataTypeFormat</a></li></ul></li><li><a href="#extractvalue">extractValue</a></li><li><a href="#formalize-1">formalize</a></li><li><a href="#value">Value</a></li></ul></div>
        </div>
        

        <div class="post-content"><p><strong>Nullable Values</strong></p>
<p>The OpenAPI specification v2 does not allow for nullable values in schemas, but to accommodate for that need a property <code>x-nullable</code> can be defined on any schema to allow the <code>null</code> value.</p>
<h1 id="instance-methods">Instance Methods</h1>
<h2 id="deserialize">deserialize</h2>
<p><code>Schema.prototype.deserialize ( value [, options ] ) : EnforcerResult &lt; any &gt;</code></p>
<p>Schema instances can deserialize values. Deserialization is the process of extracting a data structure from a scalar value. For example, the string <code>2000-01-01</code> as a date string would be deserialized to <code>new Date(&#39;2000-01-01&#39;)</code> which gives you a date object instead of a date string.</p>
<p>Note that the deserialization process keeps validation to a minimum. It won&#39;t care if a decimal number was provided for an <code>integer</code> type, but it will care if <code>&quot;hello&quot;</code> is provided as an <code>integer</code>.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td><strong>value</strong></td>
<td>The value to deserialize</td>
<td>any</td>
<td></td>
</tr>
<tr>
<td>options</td>
<td>Deserialization options. See the options table below for details.</td>
<td>object</td>
<td></td>
</tr>
</tbody></table>
<p><strong>Deserialization Options</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>strict</td>
<td>Whether to enable strict deserialization. Setting to <code>false</code> will allow strings to deserialize for booleans, integers, and numbers. It will also allow booleans to deserialize from numbers. Keeping <code>true</code> will reduce false positives.</td>
<td>boolean</td>
<td><code>true</code></td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> An <a href="/openapi-enforcer/api/enforcer-result">EnforcerResult</a> that resolves to the deserialized value.</p>
<p><strong>Example</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> Enforcer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>)
<span class="hljs-keyword">const</span> [ schema ] = <span class="hljs-keyword">new</span> Enforcer.v3_0.Schema({ <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>, <span class="hljs-attr">format</span>: <span class="hljs-string">'date-time'</span> })

<span class="hljs-keyword">const</span> [ value ] = schema.deserialize(<span class="hljs-string">'2000-01-01T00:00:00.000Z'</span>)

<span class="hljs-built_in">console</span>.log(value <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>)  <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(value.getFullYear())    <span class="hljs-comment">// 2000</span></code></pre>
<h2 id="discriminate">discriminate</h2>
<p><code>Schema.prototype.discriminate ( value [, details ]) : object</code></p>
<p>Schemas that use discriminators allow polymorphism or schema selection functionality. This function is used to get the Schema instance that is referenced through the discriminator.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td><strong>value</strong></td>
<td>The object containing the discriminator property</td>
<td><code>object</code></td>
<td></td>
</tr>
<tr>
<td>details</td>
<td>Whether to get back just the Schema instance (<code>false</code>) or the Schema instance, property name, and property value (<code>true</code>).</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> The discriminator Schema instance if <code>details=false</code>, or and object with the properties <code>key</code> (discriminator property name), <code>name</code> (value property name), and <code>schema</code> (the Schema instance) if <code>details=true</code>.</p>
<p><strong>Example</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> Enforcer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>)

<span class="hljs-keyword">const</span> definition = {
    <span class="hljs-attr">swagger</span>: <span class="hljs-string">'2.0'</span>,
    <span class="hljs-attr">info</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">version</span>: <span class="hljs-string">''</span> },
    <span class="hljs-attr">paths</span>: {},
    <span class="hljs-attr">definitions</span>: {
        <span class="hljs-attr">Cat</span>: {
            <span class="hljs-attr">allOf</span>: [
                { <span class="hljs-string">'$ref'</span>: <span class="hljs-string">'#/definitions/Pet'</span> },
                {
                    <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
                    <span class="hljs-attr">properties</span>: {
                        <span class="hljs-attr">birthDate</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span> },
                        <span class="hljs-attr">huntingSkill</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span> },
                    }
                }
            ]
        },
        <span class="hljs-attr">Dog</span>: {
            <span class="hljs-attr">allOf</span>: [
                { <span class="hljs-string">'$ref'</span>: <span class="hljs-string">'#/definitions/Pet'</span> },
                {
                    <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
                    <span class="hljs-attr">properties</span>: {
                        <span class="hljs-attr">birthDate</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>, <span class="hljs-attr">format</span>: <span class="hljs-string">'date'</span> },
                        <span class="hljs-attr">packSize</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'integer'</span>, <span class="hljs-attr">minimum</span>: <span class="hljs-number">1</span> }
                    }
                }
            ]
        },
        <span class="hljs-attr">Pet</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
            <span class="hljs-attr">required</span>: [<span class="hljs-string">'petType'</span>],
            <span class="hljs-attr">properties</span>: {
                <span class="hljs-attr">petType</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span> }
            },
            <span class="hljs-attr">discriminator</span>: <span class="hljs-string">'petType'</span>
        }
    }
}

Enforcer(definition)
    .then(<span class="hljs-function"><span class="hljs-params">enforcer</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> schema = enforcer.definitions.Pet
        <span class="hljs-keyword">const</span> dogSchema = schema.discriminate({ <span class="hljs-attr">petType</span>: <span class="hljs-string">'Dog'</span> })
        <span class="hljs-built_in">console</span>.log(dogSchema === enforcer.definitions.Dog)  <span class="hljs-comment">// true</span>
    })</code></pre>
<h2 id="formalize">formalize</h2>
<p><code>Schema.prototype.formalize ( value ) : any</code></p>
<p>This is a convenience function that calls the static <a href="/openapi-enforcer/api/components/schema#formalize-1">Schema.formalize</a> function. Please see the documentation for <a href="/openapi-enforcer/api/components/schema#formalize-1">Schema.formalize</a> for usage and examples.  </p>
<h2 id="populate">populate</h2>
<p><code>Schema.prototype.populate ([ params [, value [, options ] ] ]) : EnforcerResult &lt; any &gt;</code></p>
<p>This method is used to generate values using a combination of a parameters map and the schema definition.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>params</td>
<td>An object map, tying key value pairs to locations in the schema definition.</td>
<td><code>object</code></td>
<td><code>{}</code></td>
</tr>
<tr>
<td>value</td>
<td>An initial value to start with. Properties already defined in this value will not be overwritten during population.</td>
<td>any</td>
<td></td>
</tr>
<tr>
<td>options</td>
<td>Options to apply during population. See below.</td>
<td><code>object</code></td>
<td></td>
</tr>
</tbody></table>
<p><strong>Options Parameter</strong></p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>copy</td>
<td>Whether to copy the initial value (<code>true</code>) or mutate the initial value (<code>false</code>).</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td>conditions</td>
<td>Whether to check that the condition (<code>x-condition</code>) is met prior to population for a value.</td>
<td><code>boolean</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td>defaults</td>
<td>Whether to apply default value (<code>x-default</code> then <code>default</code>) if no other value is specified.</td>
<td><code>boolean</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td>depth</td>
<td>How deep to traverse an object that is being built.</td>
<td><code>number</code></td>
<td><code>100</code></td>
</tr>
<tr>
<td>replacement</td>
<td>The template replacement method to use. Options include <code>colon</code> (<code>:name</code>), <code>doubleHandlerBar</code> (<code>{{name}}</code>), or <code>handlebar</code> (<code>{name}</code>).</td>
<td><code>string</code></td>
<td><code>&#39;handlebar&#39;</code></td>
</tr>
<tr>
<td>templateDefaults</td>
<td>Whether to apply template replacement to default values.</td>
<td><code>boolean</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td>templates</td>
<td>Whether to use templating (<code>x-template</code>) to populate the value.</td>
<td><code>boolean</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td>variables</td>
<td>Whether to use variables (<code>x-variable</code>) to populate the value.</td>
<td><code>boolean</code></td>
<td><code>true</code></td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> An <a href="/openapi-enforcer/api/enforcer-result">EnforcerResult</a> that resolves to the populated value.</p>
<p><strong>Example</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> Enforcer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>)
<span class="hljs-keyword">const</span> [ schema ] = <span class="hljs-keyword">new</span> Enforcer.v3_0.Schema({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
    <span class="hljs-attr">properties</span>: {
        <span class="hljs-attr">age</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'integer'</span>,
            <span class="hljs-string">'x-variable'</span>: <span class="hljs-string">'age'</span>,
            <span class="hljs-string">'x-condition'</span>: <span class="hljs-string">'above18'</span>
        },
        <span class="hljs-attr">firstName</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
            <span class="hljs-string">'x-variable'</span>: <span class="hljs-string">'first'</span>
        },
        <span class="hljs-attr">fullName</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
            <span class="hljs-attr">default</span>: <span class="hljs-string">'{first} {last}'</span>
        },
        <span class="hljs-attr">lastName</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
            <span class="hljs-string">'x-variable'</span>: <span class="hljs-string">'last'</span>
        }
    }
})

<span class="hljs-keyword">const</span> [ adult ] = schema.populate({
    <span class="hljs-attr">above18</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>,
    <span class="hljs-attr">first</span>: <span class="hljs-string">'Bob'</span>,
    <span class="hljs-attr">last</span>: <span class="hljs-string">'Johnson'</span>
})

<span class="hljs-keyword">const</span> [ child ] = schema.populate({
    <span class="hljs-attr">above18</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">6</span>,
    <span class="hljs-attr">first</span>: <span class="hljs-string">'Tim'</span>,
    <span class="hljs-attr">last</span>: <span class="hljs-string">'Turner'</span>
})

<span class="hljs-built_in">console</span>.log(adult)
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//     age: 25,</span>
<span class="hljs-comment">//     firstName: 'Bob',</span>
<span class="hljs-comment">//     fullName: 'Bob Johnson',</span>
<span class="hljs-comment">//     lastName: 'Johnson'</span>
<span class="hljs-comment">// }</span>

<span class="hljs-built_in">console</span>.log(child)
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//     firstName: 'Tim',</span>
<span class="hljs-comment">//     fullName: 'Tim Turner',</span>
<span class="hljs-comment">//     lastName: 'Turner'</span>
<span class="hljs-comment">// }</span></code></pre>
<h2 id="random">random</h2>
<p><code>Schema.prototype.random ([ value [, options ] ]) : EnforcerResult &lt; any &gt;</code></p>
<p>Generate a random value that complies with the schema definition.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td>An initial value to use to begin adding randomly generated values to.</td>
<td>any</td>
<td></td>
</tr>
<tr>
<td>options</td>
<td>Configuration options. See below.</td>
<td><code>object</code></td>
<td></td>
</tr>
</tbody></table>
<p><strong>Options Parameter</strong></p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>additionalPropertiesPossibility</td>
<td>A number between <code>0</code> and <code>1</code> that signifies the possibility of additional properties being added to objects that allow them. In cases where the definition&#39;s <code>minProperties</code> has not been reached or if a property is required but not defined as a known property then that additional property will be added, regardless of the <code>additionalPropertiesPossibility</code> value.</td>
<td><code>number</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td>arrayVariation</td>
<td>The maximum random array size. This value may be overwritten if the schema defines <code>minItems</code> or <code>maxItems</code> that do not fit this value.</td>
<td><code>number</code></td>
<td><code>4</code></td>
</tr>
<tr>
<td>copy</td>
<td>Whether the passed in value should be copied (<code>true</code>) or mutated (<code>false</code>).</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td>defaultPossibility</td>
<td>A number between <code>0</code> and <code>1</code> that signifies the possibility of a default value being used when one exists.</td>
<td><code>number</code></td>
<td><code>0.25</code></td>
</tr>
<tr>
<td>definedPropertyPossibility</td>
<td>A number between <code>0</code> and <code>1</code> that signifies the possibility of setting a value for an object with a defined property. If the property is required then the random value will be set regardless of the <code>defaultPossibility</code> value.</td>
<td><code>number</code></td>
<td><code>0.80</code></td>
</tr>
<tr>
<td>maxDepth</td>
<td>Maximum depth to build to for a random object or array.</td>
<td><code>number</code></td>
<td><code>10</code></td>
</tr>
<tr>
<td>numberVariation</td>
<td>The amount of variation to have between high and low numbers. This value will be overwritten if <code>minimum</code> and <code>maximum</code> are defined for the schema.</td>
<td><code>number</code></td>
<td><code>1000</code></td>
</tr>
<tr>
<td>uniqueItemRetry</td>
<td>The number of times to attempt to come up with a unique value for arrays that have <code>uniqueItems</code> set to <code>true</code>.</td>
<td><code>number</code></td>
<td><code>5</code></td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> An <a href="/openapi-enforcer/api/enforcer-result">EnforcerResult</a> that resolves to the random value.</p>
<p><strong>Example</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> Enforcer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>)
<span class="hljs-keyword">const</span> [ schema ] = <span class="hljs-keyword">new</span> Enforcer.v3_0.Schema({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'number'</span>,
    <span class="hljs-attr">minimum</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">multipleOf</span>: <span class="hljs-number">0.5</span>
})

<span class="hljs-keyword">const</span> [ value ] = schema.random()

<span class="hljs-built_in">console</span>.log(value)  <span class="hljs-comment">// 1.5</span></code></pre>
<h2 id="serialize">serialize</h2>
<p><code>Schema.prototype.serialize ( value ) : EnforcerResult &lt; any &gt;</code></p>
<p>Serialization is the process of converting a data structure to a scalar value. For example, the date object <code>new Date(&#39;2000-01-01&#39;)</code> would be serialized to the string <code>2000-01-01</code> if the <code>type=string</code> and <code>format=date</code>.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td><strong>value</strong></td>
<td>The value to serialize.</td>
<td><code>any</code></td>
<td></td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> An <a href="/openapi-enforcer/api/enforcer-result">EnforcerResult</a> that resolves to the serialized value.</p>
<p><strong>Example</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> Enforcer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>)
<span class="hljs-keyword">const</span> [ schema ] = <span class="hljs-keyword">new</span> Enforcer.v3_0.Schema({ <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>, <span class="hljs-attr">format</span>: <span class="hljs-string">'date'</span> })

<span class="hljs-keyword">const</span> [ value ] = schema.serialize(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">'2000-01-01T00:00:00.000Z'</span>))

<span class="hljs-built_in">console</span>.log(value)  <span class="hljs-comment">// '2000-01-01'</span></code></pre>
<h2 id="validate">validate</h2>
<p><code>Schema.prototype.validate ( value ) : EnforcerException | undefined</code></p>
<p>Validate a deserialized value against the schema.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><em>value</em> - The deserialized value to validate</li>
</ul>
<p><strong>Returns:</strong> An <a href="/openapi-enforcer/api/enforcer-exception">EnforcerException</a> object an the value is not valid, otherwise <code>undefined</code>.</p>
<p><strong>Example</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> Enforcer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>)
<span class="hljs-keyword">const</span> [ schema ] = <span class="hljs-keyword">new</span> Enforcer.v3_0.Schema({ <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>  })

<span class="hljs-keyword">const</span> err = schema.validate(<span class="hljs-number">123</span>)
<span class="hljs-built_in">console</span>.log(err)
<span class="hljs-comment">// Invalid value</span>
<span class="hljs-comment">//   Expected a string. Received: 123</span></code></pre>
<h2 id="toobject">toObject</h2>
<p><code>&lt;Component&gt;prototype.toObject () : Object</code></p>
<p>Convert a component into a plain object.</p>
<p><strong>Parameters:</strong> None</p>
<p><strong>Returns:</strong> A plain object</p>
<h1 id="static-methods">Static Methods</h1>
<h3 id="definedatatypeformat">defineDataTypeFormat</h3>
<p><code>Schema.defineDataTypeFormat ( type, format, configuration ) : undefined</code></p>
<p>This is a static method that is used to define custom data formats, their serialization and deserialization, and their validation. If you have custom object classes that need special serialization, deserialization, and validation then this method is where you can define that.</p>
<p>Built into the system already is support for type <code>&#39;string&#39;</code> for formats <code>&#39;binary&#39;</code>, <code>&#39;byte&#39;</code>, <code>&#39;date&#39;</code>, and <code>&#39;date-time&#39;</code>.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td><strong>type</strong></td>
<td>The type that this data format definition will apply to. This is directly tied to the OpenAPI document schemas <code>type</code> property, therefore this value must be one of <code>&#39;boolean&#39;</code>, <code>&#39;integer&#39;</code>, <code>&#39;number&#39;</code>, or <code>&#39;string&#39;</code> as defined in the OpenAPI specification.</td>
<td><code>string</code></td>
<td></td>
</tr>
<tr>
<td><strong>format</strong></td>
<td>The name of the format that this type definition will apply to.</td>
<td><code>string</code></td>
<td></td>
</tr>
<tr>
<td><strong>configuration</strong></td>
<td>The configuration instructions for this type and format. See below.</td>
<td><code>object</code></td>
<td></td>
</tr>
</tbody></table>
<p><strong>Configuration Parameter</strong></p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td><strong>constructors</strong></td>
<td>An array of functions to be recognized as constructors.</td>
<td><code>Array &lt; function &gt;</code></td>
<td></td>
</tr>
<tr>
<td><strong>deserialize</strong></td>
<td>The function to call to deserialize the value. It receives one parameter, an object, with properties <code>exception</code>, <code>schema</code>, and <code>value</code> which contains the serialized value. This function should return the deserialized value.</td>
<td><code>function</code></td>
<td></td>
</tr>
<tr>
<td>isNumeric</td>
<td>If this value is numeric then it allows the schema properties <code>maximum</code>, <code>minimum</code>, <code>exclusiveMaximum</code>, <code>exclusiveMinimum</code>, and <code>multipleOf</code>. Defaults to <code>true</code> if the type is <code>integer</code> or <code>number</code>, otherwise <code>false</code>.</td>
<td><code>boolean</code></td>
<td>See description</td>
</tr>
<tr>
<td>random</td>
<td>The function to call to generate a random deserialized value. It receives one parameter, an object, with properties <code>exception</code> and <code>schema</code>. The function should return the deserialized value.</td>
<td><code>function</code></td>
<td></td>
</tr>
<tr>
<td><strong>serialize</strong></td>
<td>The function to call to serialize the value. It receives one parameter, an object, with properties <code>exception</code>, <code>schema</code>, and <code>value</code> which contains the deserialized value. This function should return the serialized value.</td>
<td><code>function</code></td>
<td></td>
</tr>
<tr>
<td><strong>validate</strong></td>
<td>The function to call to validate the deserialized value. It receives one parameter, and object, with the properties <code>exception</code>, <code>schema</code>, and <code>value</code> which contains the deserialized value. This function does not need to return anything and can report errors via the <code>exception</code> object.</td>
<td><code>function</code></td>
<td></td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> <code>undefined</code>.</p>
<p><strong>Example</strong></p>
<p>This example shows how you might define a decimal type that uses exact decimal values (instead of floating point). The example omits many validations and scenarios for simplicity sake.</p>
<pre><code class="language-js"><span class="hljs-comment">// define the Decimal class</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Decimal</span> </span>{
  <span class="hljs-keyword">constructor</span> (value) {
    <span class="hljs-keyword">const</span> array = value.split(<span class="hljs-string">'.'</span>)
    <span class="hljs-keyword">this</span>.characteristic = array[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">this</span>.mantissa = array[<span class="hljs-number">1</span>] || <span class="hljs-string">'0'</span>
  }

  valueOf () {
    <span class="hljs-keyword">return</span> +<span class="hljs-keyword">this</span>.characteristic + +<span class="hljs-keyword">this</span>.mantissa / <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">10</span>, <span class="hljs-keyword">this</span>.mantissa.length)
  }

  toString () {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.characteristic + <span class="hljs-string">'.'</span> + <span class="hljs-keyword">this</span>.mantissa
  }
}

<span class="hljs-comment">// define a "decimal" format</span>
<span class="hljs-keyword">const</span> Schema = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>).v3_0.Schema
Schema.defineDataTypeFormat(<span class="hljs-string">'string'</span>, <span class="hljs-string">'decimal'</span>, {
    <span class="hljs-attr">constructors</span>: [ Decimal ],

    <span class="hljs-comment">// define how to deserialize a value</span>
    deserialize: <span class="hljs-function">(<span class="hljs-params">exception, value</span>) =&gt;</span> <span class="hljs-keyword">new</span> Decimal(value),

    <span class="hljs-comment">// is numeric - allows schema maximum, minimum, exclusiveMaximum, etc.</span>
    isNumeric: <span class="hljs-literal">true</span>,

    <span class="hljs-comment">// generate a random value</span>
    random: <span class="hljs-function">(<span class="hljs-params">exception</span>) =&gt;</span> <span class="hljs-keyword">new</span> Decimal(<span class="hljs-built_in">String</span>(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">100</span>)),

    <span class="hljs-comment">// define how to serialize a value</span>
    serialize: <span class="hljs-function">(<span class="hljs-params">exception, value</span>) =&gt;</span> value.toString(),

    <span class="hljs-comment">// define validation function for deserialized value</span>
    validate: <span class="hljs-function">(<span class="hljs-params">exception, value</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">'minimum'</span>) &amp;&amp; <span class="hljs-keyword">this</span>.minimum &gt; +value) {
            exception.message(<span class="hljs-string">'Value must be above the minimum of '</span> + 
                <span class="hljs-keyword">this</span>.minimum + <span class="hljs-string">'. Received: '</span> + value)
        }
    }
})

<span class="hljs-comment">// create a schema that uses the "decimal" format</span>
<span class="hljs-keyword">const</span> [ schema ] = <span class="hljs-keyword">new</span> Schema({ <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>, <span class="hljs-attr">format</span>: <span class="hljs-string">'decimal'</span> })

<span class="hljs-comment">// deserialize a "decimal"</span>
<span class="hljs-keyword">const</span> [ value ] = schema.deserialize(<span class="hljs-string">'2.49'</span>)

<span class="hljs-built_in">console</span>.log(value <span class="hljs-keyword">instanceof</span> Decimal)   <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(+value)                     <span class="hljs-comment">// 2.49</span></code></pre>
<h2 id="extractvalue">extractValue</h2>
<p><code>Schema.extractValue ( value )</code></p>
<p>This is an <a href="/openapi-enforcer/api/components/schema-value">alias for the <code>Schema.Value.extract</code> function</a>.</p>
<h2 id="formalize-1">formalize</h2>
<p><code>Schema.formalize ( value ) : any</code></p>
<p>A schema instance&#39;s <a href="/openapi-enforcer/api/components/schema#serialize">serialize</a> and <a href="/openapi-enforcer/api/components/schema#validate">validate</a> functions require that objects meet one of two criteria:</p>
<ol>
<li>Objects must be plain objects, or</li>
<li>Objects must have a <a href="/openapi-enforcer/api/components/schema#definedatatypeformat">defined schema data type</a> that defines serialization and validation.</li>
</ol>
<p>To this end, <code>formalize</code> will correctly convert your non plain objects to a format that can be used by the <a href="/openapi-enforcer/api/components/schema#serialize">serialize</a> and <a href="/openapi-enforcer/api/components/schema#validate">validate</a> functions. In other words, this function will convert a non plain object to either a plain object equivalent or it maintain the defined type.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td>The value to formalize</td>
<td>any</td>
<td></td>
</tr>
</tbody></table>
<p><strong>Returns</strong> a formalized value.</p>
<p><strong>Example</strong></p>
<pre><code class="language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span> (<span class="hljs-params">name, birthdate</span>) </span>{
    <span class="hljs-keyword">this</span>.name = name;
    <span class="hljs-keyword">this</span>.birthdate = birthdate;
}

<span class="hljs-keyword">const</span> person = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">'bob'</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">'2000-01-01T00:00:00.000Z'</span>))

<span class="hljs-keyword">const</span> plainObject = Enforcer.v3_0.formalize(person)</code></pre>
<h2 id="value">Value</h2>
<p><code>Schema.value ( value, options ) : any</code></p>
<p>This is a sub class used only by the Schema and is used to provide more fine grained control over what parts of a value serialize, deserialize, validate, and populate.</p>
<p><a href="/openapi-enforcer/api/components/schema-value">Navigate to Schema.Value documentation</a></p>
</div>
      </article>

      <footer class="site-footer">

        
        <p>
          Caught a mistake or want to contribute to the documentation?
          <a href="https://github.com/byu-oit/openapi-enforcer/tree/master/docs-src/api/components/schema.md" target="_blank" rel="noopener">Edit this page on Github</a>
        </p>
        

        

        
        <div class="footer-links">
          
          <div><a href="https://github.com/byu-oit/openapi-enforcer" target="_blank" rel="noopener">Github</a></div>
          
          <div><a href="https://www.npmjs.com/package/openapi-enforcer" target="_blank" rel="noopener">NPM</a></div>
          
        </div>
        

      </footer>
    </div>

  </div>
</div>


<script src="/openapi-enforcer/template-files/js/main.js"></script>

</body>

</html>
